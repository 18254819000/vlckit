From 819c2d8f87e552617bd95ee3f2273c6a92e2491d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Felix=20Paul=20K=C3=BChne?= <felix@serioese.gmbh>
Date: Wed, 6 Sep 2017 17:55:25 +0200
Subject: [PATCH 19/19] audio unit iOS: add missing notification center removal

This fixes a regression introduced in e4c0308
---
 modules/audio_output/audiounit_ios.m | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/modules/audio_output/audiounit_ios.m b/modules/audio_output/audiounit_ios.m
index 9ef7e2a281..7a90ed7e77 100644
--- a/modules/audio_output/audiounit_ios.m
+++ b/modules/audio_output/audiounit_ios.m
@@ -357,6 +357,8 @@ Stop(audio_output_t *p_aout)
     struct aout_sys_t   *p_sys = p_aout->sys;
     OSStatus err;
 
+    [[NSNotificationCenter defaultCenter] removeObserver:p_sys->aoutWrapper];
+
     err = AudioOutputUnitStop(p_sys->au_unit);
     if (err != noErr)
         ca_LogWarn("AudioOutputUnitStop failed");
@@ -440,8 +442,9 @@ Start(audio_output_t *p_aout, audio_sample_format_t *restrict fmt)
         Pause(p_aout, true, 0);
 
     [[NSNotificationCenter defaultCenter] addObserver:p_sys->aoutWrapper
-           selector:@selector(audioSessionRouteChange:)
-           name:AVAudioSessionRouteChangeNotification object:nil];
+                                             selector:@selector(audioSessionRouteChange:)
+                                                 name:AVAudioSessionRouteChangeNotification
+                                               object:nil];
 
     free(layout);
     fmt->channel_type = AUDIO_CHANNEL_TYPE_BITMAP;
-- 
2.14.1

